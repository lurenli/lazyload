(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) : 
	typeof define === 'function' && (define.cmd || define.hjs) ? define(function(require,exports,module){module.exports = factory()}) :
	(global.Lazyload = factory());
}(this, (function () { 'use strict';

var $Blob = function (array, option) {
    if (window.Blob) {
        return new Blob(array, option);
    }
    else {
        window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;
        if (window.BlobBuilder) {
            var bb = new BlobBuilder();
            bb.append(array);
            return bb.getBlob(typeof option === 'object' ? option.type : undefined);
        }
        
        return bb;
    }
    
};

var $addEvent = function (e, type, fn, mark) {
    if (e.addEventListener) {
        e.addEventListener(type, fn, false);
    }
    else if (e.attachEvent) {
        //e.detachEvent('on'+type,fn);
        e.attachEvent('on' + type, function () {
            fn.call(e, window.event);
        });
    }
    
};

var $URL = window.URL || window.webkitURL || window.mozURL || window.msURL;
var Lazyload = /** @class */ (function () {
    function Lazyload(obj) {
        var _ts = this;
        var config = _ts.config = {}, data = _ts.data = {}, o = _ts.obj = {
            doc: document.documentElement,
            body: document.body
        }, blankImg = 'data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==';
        for (var i in obj) {
            _ts.config[i] = obj[i];
        }
        
        //默认容差在100像
        _ts.config['range'] = typeof _ts.config['range'] === 'numver' ? _ts.config['range'] : 100;
        //图片方法扩展
        _ts.imageExtend();
        //图片数据处理
        for (var i = 0, len = config.obj.length; i < len; i++) {
            var item = config.obj[i], dataSrc = item.lazy_dataSrc = item.getAttribute('data-src'), dataCover = item.lazy_dataCover = item.getAttribute('data-cover');
            if (item.src === '') {
                item.src = blankImg;
            }
            
            item.removeAttribute('data-src');
            //将获取的对象存储起来
            if (data[dataSrc] === undefined) {
                data[dataSrc] = [];
            }
            
            data[dataSrc].push(item);
        }
        
    }
    Lazyload.prototype.init = function () {
        var _ts = this, config = _ts.config, data = _ts.data, o = _ts.obj, task, temp;
        //图片更新执行
        (task = function () {
            //得到当前屏幕区域的需要更新图片列表
            var eList = _ts.getShowList();
            console.log(eList);
            //遍历加载图片
            for (var i = 0, len = eList.length; i < len; i++) {
                var item = eList[i];
                _ts.loadImg(item);
            }
            
        })();
        var run = function () {
            clearTimeout(temp);
            temp = setTimeout(task, 200);
        };
        $addEvent(window, 'scroll', run);
        $addEvent(window, 'resize', run);
    };
    /**
     * 图片方法扩展
     *
     * @memberof Lazyload
     */
    Lazyload.prototype.imageExtend = function () {
        var _ts = this;
        Image.prototype.load = function (url, oL) {
            var updateImg = function (src) {
                //更新图片
                for (var i = 0, len = oL.length; i < len; i++) {
                    var item = oL[i];
                    _ts.updateImg(item, src);
                }
                
            }, updateTips = function (o) {
                //更新提示
                for (var i = 0, len = oL.length; i < len; i++) {
                    var item = oL[i];
                    item.completedPercentage = o;
                    o.o = item;
                    _ts.tips(o);
                }
                
            };
            if ($Blob && $URL && XMLHttpRequest) {
                var img = this, xhr_1 = new XMLHttpRequest();
                xhr_1.open('GET', url, true);
                xhr_1.responseType = 'arraybuffer';
                xhr_1.onload = function (e) {
                    var headers = xhr_1.getAllResponseHeaders(), m = headers.match(/^Content-Type\:\s*(.*?)$/mi), mimeType = m[1] || 'image/png', blob = $Blob([this.response], {
                        type: mimeType
                    }), src = $URL.createObjectURL(blob);
                    updateImg(src);
                };
                xhr_1.onloadstart = xhr_1.onprogress = xhr_1.onloadend = function (e) {
                    var o = {
                        loaded: e.loaded,
                        total: e.total,
                        status: e.type,
                        schedule: e.loaded === 0 ? 0 : e.loaded / e.total
                    };
                    updateTips(o);
                };
                xhr_1.send();
            }
            else {
                var o_1 = {
                    loaded: undefined,
                    total: undefined,
                    status: 'loaded',
                    schedule: 0
                }, temp_1;
                temp_1 = setInterval(function () {
                    if (o_1.schedule > 0.98) {
                        clearInterval(temp_1);
                    }
                    
                    o_1.schedule = o_1.schedule + 0.01;
                    o_1.status = 'progress';
                    updateTips(o_1);
                }, 100);
                this.onload = function () {
                    clearInterval(temp_1);
                    updateImg(this.src);
                    o_1.status = 'loaded';
                    o_1.schedule = 1;
                    updateTips(o_1);
                };
            }
            
        };
    };
    /**
     * 获取浏览器窗口大小
     *
     * @returns {object} 容器宽高
     * @memberof Lazyload
     */
    Lazyload.prototype.getWinSize = function () {
        var _ts = this, o = _ts.obj;
        var o = {
            w: window.innerWidth || o.doc.clientWidth,
            h: window.innerHeight || o.doc.clientHeight
        };
        return o;
    };
    /**
     * 获取页面滚动的像素
     */
    Lazyload.prototype.getWinScroll = function () {
        var d = {
            // x: window.scrollX || document.compatMode == "BackCompat" ? document.body.scrollLeft : document.documentElement.scrollLeft,
            // y: window.scrollY || document.compatMode == "BackCompat" ? document.body.scrollTop : document.documentElement.scrollTop
            x: window.scrollX || document.documentElement.scrollLeft || window.pageXOffset || document.body.scrollLeft,
            y: window.scrollY || document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop
        };
        return d;
    };
    Lazyload.prototype.loadImg = function (o) {
        var _ts = this, data = _ts.data;
        //已经加载过的则不处理
        if (o.lazy_isInit) {
            return;
        }
        
        var list = data[o.lazy_dataSrc];
        // if(o.tagName === 'IMG'){
        //     o.load(o.lazy_dataSrc,list);
        // }else{
        var img = new Image();
        img.load(o.lazy_dataSrc, list);
        img.src = o.lazy_dataSrc;
        // if($Blob){
        // img.load(o.lazy_dataSrc, list);
        // }else{
        //     //模拟加载
        //     img.onload = function(){
        //         for(let i=0,len=list.length; i<len; i++){
        //             let item = list[i];
        //             _ts.updateImg(item,src);
        //         };
        //     };
        // };
        // };
        //更新图片地址相同的元素
        for (var i = 0, len = list.length; i < len; i++) {
            var item = list[i];
            if (item.lazy_isInit) {
                continue;
            }
            
            item.lazy_isInit = true;
            if (item.lazy_dataCover) {
                _ts.updateImg(item, item.lazy_dataCover);
            }
            
        }
        
    };
    /**
     * 更新图片
     *
     * @param {object} o 需要更新的元素
     * @param {string} url 图片地址
     * @memberof Lazyload
     */
    Lazyload.prototype.updateImg = function (o, url) {
        if (o.tagName === 'IMG') {
            o.src = url;
        }
        else {
            o.style.backgroundImage = "url(" + url + ")";
        }
        
    };
    Lazyload.prototype.getElementTop = function (element) {
        var actualTop = element.offsetTop, current = element.offsetParent;
        while (current !== null) {
            actualTop += current.offsetTop;
            current = current.offsetParent;
        }
        
        return actualTop;
    };
    Lazyload.prototype.getElementLeft = function (element) {
        var actualLeft = element.offsetLeft, current = element.offsetParent;
        while (current !== null) {
            actualLeft += current.offsetLeft;
            current = current.offsetParent;
        }
        
        return actualLeft;
    };
    /**
     * 获取需要显示的元素
     */
    Lazyload.prototype.getShowList = function () {
        var _ts = this, config = _ts.config;
        var scroll = _ts.getWinScroll(), winSize = _ts.getWinSize(), temp = [];
        //console.log(scroll,winSize)
        for (var i = 0, len = config.obj.length; i < len; i++) {
            var item = config.obj[i], left = _ts.getElementLeft(item), top = _ts.getElementTop(item), width = item.clientWidth, height = item.clientHeight, xl = left + width - scroll.x > 0 - config.range, //页面左侧显示条件
            xr = winSize.w + scroll.x + config.range > left, //页面右侧显示条件
            yt = top + height - scroll.y > 0 - config.range, //页面顶部显示条件
            yb = top < scroll.y + winSize.h + config.range, //页面底部显示条件
            isInit = item.lazy_isInit;
            //console.log(item,isInit,'left',left,'top',top,'width',width,'height',height);
            console.log(scroll);
            if (xl && xr && yt && yb && !isInit) {
                temp.push(item);
            }
            
        }
        
        return temp;
    };
    /**
     * 默认的提示方法
     * @param obj --
     */
    Lazyload.prototype.tips = function (obj) {
        var schedule = parseInt(obj.schedule * 100) + '%', o = obj.o;
        if (o.lazy_isEchoTip === undefined) {
            o.lazy_isEchoTip = true;
            o.lazy_oTip = document.createElement('span');
            o.lazy_oTip.className = 'lazy_tip';
            o.parentNode.insertBefore(o.lazy_oTip, o.nextSibling);
            //console.log(o.lazy_otip.parentNode)
        }
        
        o.lazy_oTip.innerHTML = schedule;
        //当加载进度为1时，则移除对应的加载提示
        if (obj.schedule === 1 && o.lazy_isEchoTip) {
            o.parentNode.removeChild(o.lazy_oTip);
            o.lazy_isEchoTip = undefined;
        }
        
    };
    return Lazyload;
}());

return Lazyload;

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9mYW4vd29yay93ZWIvbGF6eWxvYWQvc3JjL2pzL19CbG9iLmVzNiIsIi9Vc2Vycy9mYW4vd29yay93ZWIvbGF6eWxvYWQvc3JjL2pzL19hZGRFdmVudC5lczYiLCIvVXNlcnMvZmFuL3dvcmsvd2ViL2xhenlsb2FkL3NyYy9qcy9MYXp5bG9hZC5lczYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKGFycmF5LG9wdGlvbik9PntcbiAgICBpZih3aW5kb3cuQmxvYil7XG4gICAgICAgIHJldHVybiBuZXcgQmxvYihhcnJheSxvcHRpb24pXG4gICAgfWVsc2V7XG4gICAgICAgIHdpbmRvdy5CbG9iQnVpbGRlciA9IHdpbmRvdy5CbG9iQnVpbGRlciB8fCB3aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXIgfHwgd2luZG93Lk1vekJsb2JCdWlsZGVyIHx8IHdpbmRvdy5NU0Jsb2JCdWlsZGVyO1xuICAgICAgICBpZih3aW5kb3cuQmxvYkJ1aWxkZXIpe1xuICAgICAgICAgICAgbGV0IGJiID0gbmV3IEJsb2JCdWlsZGVyKCk7XG4gICAgICAgICAgICBiYi5hcHBlbmQoYXJyYXkpO1xuICAgICAgICAgICAgcmV0dXJuIGJiLmdldEJsb2IodHlwZW9mIG9wdGlvbiA9PT0gJ29iamVjdCcgPyBvcHRpb24udHlwZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBiYjtcbiAgICB9O1xufTsiLCJleHBvcnQgZGVmYXVsdCAoZSx0eXBlLGZuLG1hcmspPT57XG4gICAgaWYoZS5hZGRFdmVudExpc3RlbmVyKXtcbiAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsZm4sZmFsc2UpO1xuICAgIH1lbHNlIGlmKGUuYXR0YWNoRXZlbnQpe1xuICAgICAgICAvL2UuZGV0YWNoRXZlbnQoJ29uJyt0eXBlLGZuKTtcbiAgICAgICAgZS5hdHRhY2hFdmVudCgnb24nK3R5cGUsKCk9PntcbiAgICAgICAgICAgIGZuLmNhbGwoZSx3aW5kb3cuZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9O1xufTsiLCJpbXBvcnQgJEJsb2IgZnJvbSAnLi9fQmxvYi5lczYnO1xuaW1wb3J0ICRhZGRFdmVudCBmcm9tICcuL19hZGRFdmVudC5lczYnO1xuXG5jb25zdCAkVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMIHx8IHdpbmRvdy5tb3pVUkwgfHwgd2luZG93Lm1zVVJMO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYXp5bG9hZCB7XG4gICAgY29uc3RydWN0b3Iob2JqKSB7XG4gICAgICAgIGNvbnN0IF90cyA9IHRoaXM7XG4gICAgICAgIGxldCBjb25maWcgPSBfdHMuY29uZmlnID0ge30sXG4gICAgICAgICAgICBkYXRhID0gX3RzLmRhdGEgPSB7fSxcbiAgICAgICAgICAgIG8gPSBfdHMub2JqID0ge1xuICAgICAgICAgICAgICAgIGRvYzogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgICAgICAgICAgIGJvZHk6IGRvY3VtZW50LmJvZHlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBibGFua0ltZyA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUUltV05nWUdCZ0FBQUFCUUFCaDZGTzFBQUFBQUJKUlU1RXJrSmdnZz09JztcblxuICAgICAgICBmb3IgKGxldCBpIGluIG9iaikge1xuICAgICAgICAgICAgX3RzLmNvbmZpZ1tpXSA9IG9ialtpXTtcbiAgICAgICAgfTtcblxuICAgICAgICAvL+m7mOiupOWuueW3ruWcqDEwMOWDj1xuICAgICAgICBfdHMuY29uZmlnWydyYW5nZSddID0gdHlwZW9mIF90cy5jb25maWdbJ3JhbmdlJ10gPT09ICdudW12ZXInID8gX3RzLmNvbmZpZ1sncmFuZ2UnXSA6IDEwMDtcblxuICAgICAgICAvL+WbvueJh+aWueazleaJqeWxlVxuICAgICAgICBfdHMuaW1hZ2VFeHRlbmQoKTtcblxuICAgICAgICAvL+WbvueJh+aVsOaNruWkhOeQhlxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY29uZmlnLm9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSBjb25maWcub2JqW2ldLFxuICAgICAgICAgICAgICAgIGRhdGFTcmMgPSBpdGVtLmxhenlfZGF0YVNyYyA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpLFxuICAgICAgICAgICAgICAgIGRhdGFDb3ZlciA9IGl0ZW0ubGF6eV9kYXRhQ292ZXIgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1jb3ZlcicpO1xuXG4gICAgICAgICAgICBpZiAoaXRlbS5zcmMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zcmMgPSBibGFua0ltZztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcblxuICAgICAgICAgICAgLy/lsIbojrflj5bnmoTlr7nosaHlrZjlgqjotbfmnaVcbiAgICAgICAgICAgIGlmIChkYXRhW2RhdGFTcmNdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkYXRhW2RhdGFTcmNdID0gW107XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGF0YVtkYXRhU3JjXS5wdXNoKGl0ZW0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIGNvbnN0IF90cyA9IHRoaXMsXG4gICAgICAgICAgICBjb25maWcgPSBfdHMuY29uZmlnLFxuICAgICAgICAgICAgZGF0YSA9IF90cy5kYXRhLFxuICAgICAgICAgICAgbyA9IF90cy5vYmosXG4gICAgICAgICAgICB0YXNrLFxuICAgICAgICAgICAgdGVtcDtcblxuICAgICAgICAvL+WbvueJh+abtOaWsOaJp+ihjFxuICAgICAgICAodGFzayA9ICgpID0+IHtcbiAgICAgICAgICAgIC8v5b6X5Yiw5b2T5YmN5bGP5bmV5Yy65Z+f55qE6ZyA6KaB5pu05paw5Zu+54mH5YiX6KGoXG4gICAgICAgICAgICBsZXQgZUxpc3QgPSBfdHMuZ2V0U2hvd0xpc3QoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVMaXN0KVxuXG4gICAgICAgICAgICAvL+mBjeWOhuWKoOi9veWbvueJh1xuICAgICAgICAgICAgZm9yKGxldCBpPTAsbGVuPWVMaXN0Lmxlbmd0aDsgaTxsZW47IGkrKyl7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBlTGlzdFtpXSxcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gaXRlbS5sYXp5X2RhdGFTcmM7XG4gICAgICAgICAgICAgICAgX3RzLmxvYWRJbWcoaXRlbSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIGxldCBydW4gPSAoKT0+e1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRlbXApO1xuICAgICAgICAgICAgdGVtcCA9IHNldFRpbWVvdXQodGFzaywgMjAwKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkYWRkRXZlbnQod2luZG93LCdzY3JvbGwnLHJ1bik7XG4gICAgICAgICRhZGRFdmVudCh3aW5kb3csJ3Jlc2l6ZScscnVuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlm77niYfmlrnms5XmianlsZVcbiAgICAgKiBcbiAgICAgKiBAbWVtYmVyb2YgTGF6eWxvYWRcbiAgICAgKi9cbiAgICBpbWFnZUV4dGVuZCgpIHtcbiAgICAgICAgY29uc3QgX3RzID0gdGhpcztcblxuICAgICAgICBJbWFnZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICh1cmwsIG9MKSB7XG4gICAgICAgICAgICBsZXQgdXBkYXRlSW1nID0gKHNyYykgPT4ge1xuICAgICAgICAgICAgICAgIC8v5pu05paw5Zu+54mHXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9MLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpdGVtID0gb0xbaV07XG4gICAgICAgICAgICAgICAgICAgIF90cy51cGRhdGVJbWcoaXRlbSwgc3JjKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZVRpcHMgPSAobykgPT4ge1xuICAgICAgICAgICAgICAgIC8v5pu05paw5o+Q56S6XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9MLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpdGVtID0gb0xbaV07XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY29tcGxldGVkUGVyY2VudGFnZSA9IG87XG4gICAgICAgICAgICAgICAgICAgIG8ubyA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIF90cy50aXBzKG8pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoJEJsb2IgJiYgJFVSTCAmJiBYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIGxldCBpbWcgPSB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBoZWFkZXJzLm1hdGNoKC9eQ29udGVudC1UeXBlXFw6XFxzKiguKj8pJC9taSksXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZSA9IG1bMV0gfHwgJ2ltYWdlL3BuZycsXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9iID0gJEJsb2IoW3RoaXMucmVzcG9uc2VdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbWltZVR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gJFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUltZyhzcmMpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB4aHIub25sb2Fkc3RhcnQgPSB4aHIub25wcm9ncmVzcyA9IHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZDogZS5sb2FkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbDogZS50b3RhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGU6IGUubG9hZGVkID09PSAwID8gMCA6IGUubG9hZGVkIC8gZS50b3RhbFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaXBzKG8pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdsb2FkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGU6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcDtcblxuICAgICAgICAgICAgICAgIHRlbXAgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvLnNjaGVkdWxlID4gMC45OCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgby5zY2hlZHVsZSA9IG8uc2NoZWR1bGUgKyAwLjAxO1xuICAgICAgICAgICAgICAgICAgICBvLnN0YXR1cyA9ICdwcm9ncmVzcyc7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpcHMobyk7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlSW1nKHRoaXMuc3JjKTtcbiAgICAgICAgICAgICAgICAgICAgby5zdGF0dXMgPSAnbG9hZGVkJztcbiAgICAgICAgICAgICAgICAgICAgby5zY2hlZHVsZSA9IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGlwcyhvKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bmtY/op4jlmajnqpflj6PlpKflsI9cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSDlrrnlmajlrr3pq5hcbiAgICAgKiBAbWVtYmVyb2YgTGF6eWxvYWRcbiAgICAgKi9cbiAgICBnZXRXaW5TaXplKCkge1xuICAgICAgICBjb25zdCBfdHMgPSB0aGlzLFxuICAgICAgICAgICAgbyA9IF90cy5vYmo7XG4gICAgICAgIGxldCBvID0ge1xuICAgICAgICAgICAgdzogd2luZG93LmlubmVyV2lkdGggfHwgby5kb2MuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBoOiB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgby5kb2MuY2xpZW50SGVpZ2h0XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBvO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPlumhtemdoua7muWKqOeahOWDj+e0oFxuICAgICAqL1xuICAgIGdldFdpblNjcm9sbCgpIHtcbiAgICAgICAgY29uc3QgX3RzID0gdGhpcyxcbiAgICAgICAgICAgIG8gPSBfdHMub2JqO1xuICAgICAgICBsZXQgZCA9IHtcbiAgICAgICAgICAgIC8vIHg6IHdpbmRvdy5zY3JvbGxYIHx8IGRvY3VtZW50LmNvbXBhdE1vZGUgPT0gXCJCYWNrQ29tcGF0XCIgPyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIC8vIHk6IHdpbmRvdy5zY3JvbGxZIHx8IGRvY3VtZW50LmNvbXBhdE1vZGUgPT0gXCJCYWNrQ29tcGF0XCIgPyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3BcbiAgICAgICAgICAgIHg6IHdpbmRvdy5zY3JvbGxYIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsXG4gICAgICAgICAgICB5OiB3aW5kb3cuc2Nyb2xsWSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkO1xuICAgIH1cblxuICAgIGxvYWRJbWcobykge1xuICAgICAgICBjb25zdCBfdHMgPSB0aGlzLFxuICAgICAgICAgICAgZGF0YSA9IF90cy5kYXRhO1xuXG4gICAgICAgIC8v5bey57uP5Yqg6L296L+H55qE5YiZ5LiN5aSE55CGXG4gICAgICAgIGlmIChvLmxhenlfaXNJbml0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG5cblxuICAgICAgICBsZXQgbGlzdCA9IGRhdGFbby5sYXp5X2RhdGFTcmNdO1xuXG4gICAgICAgIC8vIGlmKG8udGFnTmFtZSA9PT0gJ0lNRycpe1xuICAgICAgICAvLyAgICAgby5sb2FkKG8ubGF6eV9kYXRhU3JjLGxpc3QpO1xuICAgICAgICAvLyB9ZWxzZXtcbiAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWcubG9hZChvLmxhenlfZGF0YVNyYywgbGlzdCk7XG4gICAgICAgIGltZy5zcmMgPSBvLmxhenlfZGF0YVNyYztcblxuICAgICAgICAvLyBpZigkQmxvYil7XG4gICAgICAgIC8vIGltZy5sb2FkKG8ubGF6eV9kYXRhU3JjLCBsaXN0KTtcbiAgICAgICAgLy8gfWVsc2V7XG4gICAgICAgIC8vICAgICAvL+aooeaLn+WKoOi9vVxuICAgICAgICAvLyAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vICAgICAgICAgZm9yKGxldCBpPTAsbGVuPWxpc3QubGVuZ3RoOyBpPGxlbjsgaSsrKXtcbiAgICAgICAgLy8gICAgICAgICAgICAgbGV0IGl0ZW0gPSBsaXN0W2ldO1xuICAgICAgICAvLyAgICAgICAgICAgICBfdHMudXBkYXRlSW1nKGl0ZW0sc3JjKTtcbiAgICAgICAgLy8gICAgICAgICB9O1xuICAgICAgICAvLyAgICAgfTtcbiAgICAgICAgLy8gfTtcblxuICAgICAgICAvLyB9O1xuXG5cbiAgICAgICAgLy/mm7TmlrDlm77niYflnLDlnYDnm7jlkIznmoTlhYPntKBcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBpdGVtID0gbGlzdFtpXTtcbiAgICAgICAgICAgIGlmIChpdGVtLmxhenlfaXNJbml0KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaXRlbS5sYXp5X2lzSW5pdCA9IHRydWU7XG4gICAgICAgICAgICBpZihpdGVtLmxhenlfZGF0YUNvdmVyKXtcbiAgICAgICAgICAgICAgICBfdHMudXBkYXRlSW1nKGl0ZW0sIGl0ZW0ubGF6eV9kYXRhQ292ZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmm7TmlrDlm77niYdcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gbyDpnIDopoHmm7TmlrDnmoTlhYPntKBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIOWbvueJh+WcsOWdgFxuICAgICAqIEBtZW1iZXJvZiBMYXp5bG9hZFxuICAgICAqL1xuICAgIHVwZGF0ZUltZyhvLCB1cmwpIHtcbiAgICAgICAgaWYgKG8udGFnTmFtZSA9PT0gJ0lNRycpIHtcbiAgICAgICAgICAgIG8uc3JjID0gdXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dXJsfSlgO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldEVsZW1lbnRUb3AoZWxlbWVudCkge1xuICAgICAgICBsZXQgYWN0dWFsVG9wID0gZWxlbWVudC5vZmZzZXRUb3AsXG4gICAgICAgICAgICBjdXJyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG5cbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IG51bGwpIHvjgIDjgIDjgIDjgIDjgIDjgIBcbiAgICAgICAgICAgIGFjdHVhbFRvcCArPSBjdXJyZW50Lm9mZnNldFRvcDvjgIDjgIDjgIDjgIDjgIDjgIBcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm9mZnNldFBhcmVudDvjgIDjgIDjgIDjgIBcbiAgICAgICAgfTvjgIDjgIDjgIBcbiAgICAgICAgcmV0dXJuIGFjdHVhbFRvcDtcbiAgICB9XG5cbiAgICBnZXRFbGVtZW50TGVmdChlbGVtZW50KSB7XG4gICAgICAgIGxldCBhY3R1YWxMZWZ0ID0gZWxlbWVudC5vZmZzZXRMZWZ0LFxuICAgICAgICAgICAgY3VycmVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50O1xu44CA44CA44CAXG4gICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSBudWxsKSB744CA44CA44CA44CA44CA44CAXG4gICAgICAgICAgICBhY3R1YWxMZWZ0ICs9IGN1cnJlbnQub2Zmc2V0TGVmdDvjgIDjgIDjgIDjgIDjgIDjgIBcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm9mZnNldFBhcmVudDvjgIDjgIDjgIDjgIBcbiAgICAgICAgfTtcbiAgICAgICAg44CA44CA44CA44CAXG4gICAgICAgIHJldHVybiBhY3R1YWxMZWZ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPlumcgOimgeaYvuekuueahOWFg+e0oFxuICAgICAqL1xuICAgIGdldFNob3dMaXN0KCkge1xuICAgICAgICBjb25zdCBfdHMgPSB0aGlzLFxuICAgICAgICAgICAgY29uZmlnID0gX3RzLmNvbmZpZyxcbiAgICAgICAgICAgIGRhdGEgPSBfdHMuZGF0YTtcblxuICAgICAgICBsZXQgc2Nyb2xsID0gX3RzLmdldFdpblNjcm9sbCgpLFxuICAgICAgICAgICAgd2luU2l6ZSA9IF90cy5nZXRXaW5TaXplKCksXG4gICAgICAgICAgICB0ZW1wID0gW107XG4gICAgICAgIC8vY29uc29sZS5sb2coc2Nyb2xsLHdpblNpemUpXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGNvbmZpZy5vYmoubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBpdGVtID0gY29uZmlnLm9ialtpXSxcbiAgICAgICAgICAgICAgICBsZWZ0ID0gX3RzLmdldEVsZW1lbnRMZWZ0KGl0ZW0pLFxuICAgICAgICAgICAgICAgIHRvcCA9IF90cy5nZXRFbGVtZW50VG9wKGl0ZW0pLFxuICAgICAgICAgICAgICAgIHdpZHRoID0gaXRlbS5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBpdGVtLmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgICAgICB4bCA9IGxlZnQgKyB3aWR0aCAtIHNjcm9sbC54ID4gMCAtIGNvbmZpZy5yYW5nZSwgLy/pobXpnaLlt6bkvqfmmL7npLrmnaHku7ZcbiAgICAgICAgICAgICAgICB4ciA9IHdpblNpemUudyArIHNjcm9sbC54ICsgY29uZmlnLnJhbmdlID4gbGVmdCwgLy/pobXpnaLlj7PkvqfmmL7npLrmnaHku7ZcbiAgICAgICAgICAgICAgICB5dCA9IHRvcCArIGhlaWdodCAtIHNjcm9sbC55ID4gMCAtIGNvbmZpZy5yYW5nZSwgLy/pobXpnaLpobbpg6jmmL7npLrmnaHku7ZcbiAgICAgICAgICAgICAgICB5YiA9IHRvcCA8IHNjcm9sbC55ICsgd2luU2l6ZS5oICsgY29uZmlnLnJhbmdlLCAvL+mhtemdouW6lemDqOaYvuekuuadoeS7tlxuICAgICAgICAgICAgICAgIGlzSW5pdCA9IGl0ZW0ubGF6eV9pc0luaXQ7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGl0ZW0saXNJbml0LCdsZWZ0JyxsZWZ0LCd0b3AnLHRvcCwnd2lkdGgnLHdpZHRoLCdoZWlnaHQnLGhlaWdodCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzY3JvbGwpXG4gICAgICAgICAgICBpZiAoeGwgJiYgeHIgJiYgeXQgJiYgeWIgJiYgIWlzSW5pdCkge1xuICAgICAgICAgICAgICAgIHRlbXAucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOm7mOiupOeahOaPkOekuuaWueazlVxuICAgICAqIEBwYXJhbSBvYmogLS1cbiAgICAgKi9cbiAgICB0aXBzKG9iaikge1xuICAgICAgICBsZXQgc2NoZWR1bGUgPSBwYXJzZUludChvYmouc2NoZWR1bGUgKiAxMDApICsgJyUnLFxuICAgICAgICAgICAgbyA9IG9iai5vO1xuXG4gICAgICAgIGlmIChvLmxhenlfaXNFY2hvVGlwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG8ubGF6eV9pc0VjaG9UaXAgPSB0cnVlO1xuICAgICAgICAgICAgby5sYXp5X29UaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBvLmxhenlfb1RpcC5jbGFzc05hbWUgPSAnbGF6eV90aXAnO1xuICAgICAgICAgICAgby5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvLmxhenlfb1RpcCwgby5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKG8ubGF6eV9vdGlwLnBhcmVudE5vZGUpXG4gICAgICAgIH07XG5cbiAgICAgICAgby5sYXp5X29UaXAuaW5uZXJIVE1MID0gc2NoZWR1bGU7XG5cbiAgICAgICAgLy/lvZPliqDovb3ov5vluqbkuLox5pe277yM5YiZ56e76Zmk5a+55bqU55qE5Yqg6L295o+Q56S6XG4gICAgICAgIGlmKG9iai5zY2hlZHVsZSA9PT0gMSAmJiBvLmxhenlfaXNFY2hvVGlwKXtcbiAgICAgICAgICAgIG8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvLmxhenlfb1RpcCk7XG4gICAgICAgICAgICBvLmxhenlfaXNFY2hvVGlwID0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgIH1cbn07Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLFlBQWUsVUFBQyxLQUFLLEVBQUMsTUFBTTtJQUN4QixJQUFHLE1BQU0sQ0FBQyxJQUFJLEVBQUM7UUFDWCxPQUFPLElBQUksSUFBSSxDQUFDLEtBQUssRUFB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