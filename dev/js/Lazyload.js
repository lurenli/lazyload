(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) : 
	typeof define === 'function' && (define.cmd || define.hjs) ? define(function(require,exports,module){module.exports = factory()}) :
	(global.Lazyload = factory());
}(this, (function () { 'use strict';

var $Blob = function (array, option) {
    if (window.Blob) {
        return new Blob(array, option);
    }
    else {
        window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;
        if (window.BlobBuilder) {
            var bb = new BlobBuilder();
            bb.append(array);
            return bb.getBlob(typeof option === 'object' ? option.type : undefined);
        }
        
        return bb;
    }
    
};

var $addEvent = function (e, type, fn, mark) {
    if (e.addEventListener) {
        e.addEventListener(type, fn, false);
    }
    else if (e.attachEvent) {
        //e.detachEvent('on'+type,fn);
        e.attachEvent('on' + type, function () {
            fn.call(e, window.event);
        });
    }
    
};

var $URL = window.URL || window.webkitURL || window.mozURL || window.msURL;
var Lazyload = /** @class */ (function () {
    function Lazyload(obj) {
        var _ts = this;
        var config = _ts.config = {}, data = _ts.data = {}, o = _ts.obj = {
            doc: document.documentElement,
            body: document.body
        }, blankImg = 'data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==';
        for (var i in obj) {
            _ts.config[i] = obj[i];
        }
        
        //默认容差在100像
        _ts.config['range'] = typeof _ts.config['range'] === 'numver' ? _ts.config['range'] : 100;
        //图片方法扩展
        _ts.imageExtend();
        //图片数据处理
        for (var i = 0, len = config.obj.length; i < len; i++) {
            var item = config.obj[i], dataSrc = item.lazy_dataSrc = item.getAttribute('data-src'), dataCover = item.lazy_dataCover = item.getAttribute('data-cover');
            if (item.src === '') {
                item.src = blankImg;
            }
            
            item.removeAttribute('data-src');
            //将获取的对象存储起来
            if (data[dataSrc] === undefined) {
                data[dataSrc] = [];
            }
            
            data[dataSrc].push(item);
        }
        
    }
    Lazyload.prototype.init = function () {
        var _ts = this, config = _ts.config, data = _ts.data, o = _ts.obj, task, temp;
        //图片更新执行
        (task = function () {
            //得到当前屏幕区域的需要更新图片列表
            var eList = _ts.getShowList();
            //遍历加载图片
            for (var i = 0, len = eList.length; i < len; i++) {
                var item = eList[i];
                _ts.loadImg(item);
            }
            
        })();
        var run = function () {
            clearTimeout(temp);
            temp = setTimeout(task, 200);
        };
        $addEvent(window, 'scroll', run);
        $addEvent(window, 'resize', run);
    };
    /**
     * 图片方法扩展
     *
     * @memberof Lazyload
     */
    Lazyload.prototype.imageExtend = function () {
        var _ts = this;
        Image.prototype.load = function (url, oL) {
            var updateImg = function (src) {
                //更新图片
                for (var i = 0, len = oL.length; i < len; i++) {
                    var item = oL[i];
                    _ts.updateImg(item, src);
                }
                
            }, updateTips = function (o) {
                //更新提示
                for (var i = 0, len = oL.length; i < len; i++) {
                    var item = oL[i];
                    item.completedPercentage = o;
                    o.o = item;
                    _ts.tips(o);
                }
                
            };
            if ($Blob && $URL && XMLHttpRequest) {
                var img = this, xhr_1 = new XMLHttpRequest();
                xhr_1.open('GET', url, true);
                xhr_1.responseType = 'arraybuffer';
                xhr_1.onload = function (e) {
                    var headers = xhr_1.getAllResponseHeaders(), m = headers.match(/^Content-Type\:\s*(.*?)$/mi), mimeType = m[1] || 'image/png', blob = $Blob([this.response], {
                        type: mimeType
                    }), src = $URL.createObjectURL(blob);
                    updateImg(src);
                };
                xhr_1.onloadstart = xhr_1.onprogress = xhr_1.onloadend = function (e) {
                    var o = {
                        loaded: e.loaded,
                        total: e.total,
                        status: e.type,
                        schedule: e.loaded === 0 ? 0 : e.loaded / e.total
                    };
                    updateTips(o);
                };
                xhr_1.send();
            }
            else {
                var o_1 = {
                    loaded: undefined,
                    total: undefined,
                    status: 'loaded',
                    schedule: 0
                }, temp_1;
                temp_1 = setInterval(function () {
                    if (o_1.schedule > 0.98) {
                        clearInterval(temp_1);
                    }
                    
                    o_1.schedule = o_1.schedule + 0.01;
                    o_1.status = 'progress';
                    updateTips(o_1);
                }, 100);
                this.onload = function () {
                    clearInterval(temp_1);
                    updateImg(this.src);
                    o_1.status = 'loaded';
                    o_1.schedule = 1;
                    updateTips(o_1);
                };
            }
            
        };
    };
    /**
     * 获取浏览器窗口大小
     *
     * @returns {object} 容器宽高
     * @memberof Lazyload
     */
    Lazyload.prototype.getWinSize = function () {
        var _ts = this, o = _ts.obj;
        var o = {
            w: window.innerWidth || o.doc.clientWidth,
            h: window.innerHeight || o.doc.clientHeight
        };
        return o;
    };
    /**
     * 获取页面滚动的像素
     */
    Lazyload.prototype.getWinScroll = function () {
        var d = {
            // x: window.scrollX || document.compatMode == "BackCompat" ? document.body.scrollLeft : document.documentElement.scrollLeft,
            // y: window.scrollY || document.compatMode == "BackCompat" ? document.body.scrollTop : document.documentElement.scrollTop
            x: document.compatMode == "BackCompat" ? document.body.scrollLeft : document.documentElement.scrollLeft,
            y: document.compatMode == "BackCompat" ? document.body.scrollTop : document.documentElement.scrollTop
        };
        return d;
    };
    Lazyload.prototype.loadImg = function (o) {
        var _ts = this, data = _ts.data;
        //已经加载过的则不处理
        if (o.lazy_isInit) {
            return;
        }
        
        var list = data[o.lazy_dataSrc];
        // if(o.tagName === 'IMG'){
        //     o.load(o.lazy_dataSrc,list);
        // }else{
        var img = new Image();
        img.load(o.lazy_dataSrc, list);
        img.src = o.lazy_dataSrc;
        // if($Blob){
        // img.load(o.lazy_dataSrc, list);
        // }else{
        //     //模拟加载
        //     img.onload = function(){
        //         for(let i=0,len=list.length; i<len; i++){
        //             let item = list[i];
        //             _ts.updateImg(item,src);
        //         };
        //     };
        // };
        // };
        //更新图片地址相同的元素
        for (var i = 0, len = list.length; i < len; i++) {
            var item = list[i];
            if (item.lazy_isInit) {
                continue;
            }
            
            item.lazy_isInit = true;
            if (item.lazy_dataCover) {
                _ts.updateImg(item, item.lazy_dataCover);
            }
            
        }
        
    };
    /**
     * 更新图片
     *
     * @param {object} o 需要更新的元素
     * @param {string} url 图片地址
     * @memberof Lazyload
     */
    Lazyload.prototype.updateImg = function (o, url) {
        if (o.tagName === 'IMG') {
            o.src = url;
        }
        else {
            o.style.backgroundImage = "url(" + url + ")";
        }
        
    };
    Lazyload.prototype.getElementTop = function (element) {
        var actualTop = element.offsetTop, current = element.offsetParent;
        while (current !== null) {
            actualTop += current.offsetTop;
            current = current.offsetParent;
        }
        
        return actualTop;
    };
    Lazyload.prototype.getElementLeft = function (element) {
        var actualLeft = element.offsetLeft, current = element.offsetParent;
        while (current !== null) {
            actualLeft += current.offsetLeft;
            current = current.offsetParent;
        }
        
        return actualLeft;
    };
    /**
     * 获取需要显示的元素
     */
    Lazyload.prototype.getShowList = function () {
        var _ts = this, config = _ts.config;
        var scroll = _ts.getWinScroll(), winSize = _ts.getWinSize(), temp = [];
        //console.log(scroll,winSize)
        for (var i = 0, len = config.obj.length; i < len; i++) {
            var item = config.obj[i], left = _ts.getElementLeft(item), top = _ts.getElementTop(item), width = item.clientWidth, height = item.clientHeight, xl = left + width - scroll.x > 0 - config.range, //页面左侧显示条件
            xr = winSize.w + scroll.x + config.range > left, //页面右侧显示条件
            yt = top + height - scroll.y > 0 - config.range, //页面顶部显示条件
            yb = top < scroll.y + winSize.h + config.range, //页面底部显示条件
            isInit = item.lazy_isInit;
            //console.log('left',left,'top',top,'width',width,'height',height);
            if (xl && xr && yt && yb && !isInit) {
                temp.push(item);
            }
            
        }
        
        return temp;
    };
    /**
     * 默认的提示方法
     * @param obj --
     */
    Lazyload.prototype.tips = function (obj) {
        var schedule = parseInt(obj.schedule * 100) + '%', o = obj.o;
        if (o.lazy_isEchoTip === undefined) {
            o.lazy_isEchoTip = true;
            o.lazy_oTip = document.createElement('span');
            o.lazy_oTip.className = 'lazy_tip';
            o.parentNode.insertBefore(o.lazy_oTip, o.nextSibling);
            //console.log(o.lazy_otip.parentNode)
        }
        
        o.lazy_oTip.innerHTML = schedule;
        //当加载进度为1时，则移除对应的加载提示
        if (obj.schedule === 1 && o.lazy_isEchoTip) {
            o.parentNode.removeChild(o.lazy_oTip);
            o.lazy_isEchoTip = undefined;
        }
        
    };
    return Lazyload;
}());

return Lazyload;

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9mYW4vd29yay93ZWIvbGF6eWxvYWQvc3JjL2pzL19CbG9iLmVzNiIsIi9Vc2Vycy9mYW4vd29yay93ZWIvbGF6eWxvYWQvc3JjL2pzL19hZGRFdmVudC5lczYiLCIvVXNlcnMvZmFuL3dvcmsvd2ViL2xhenlsb2FkL3NyYy9qcy9MYXp5bG9hZC5lczYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKGFycmF5LG9wdGlvbik9PntcbiAgICBpZih3aW5kb3cuQmxvYil7XG4gICAgICAgIHJldHVybiBuZXcgQmxvYihhcnJheSxvcHRpb24pXG4gICAgfWVsc2V7XG4gICAgICAgIHdpbmRvdy5CbG9iQnVpbGRlciA9IHdpbmRvdy5CbG9iQnVpbGRlciB8fCB3aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXIgfHwgd2luZG93Lk1vekJsb2JCdWlsZGVyIHx8IHdpbmRvdy5NU0Jsb2JCdWlsZGVyO1xuICAgICAgICBpZih3aW5kb3cuQmxvYkJ1aWxkZXIpe1xuICAgICAgICAgICAgbGV0IGJiID0gbmV3IEJsb2JCdWlsZGVyKCk7XG4gICAgICAgICAgICBiYi5hcHBlbmQoYXJyYXkpO1xuICAgICAgICAgICAgcmV0dXJuIGJiLmdldEJsb2IodHlwZW9mIG9wdGlvbiA9PT0gJ29iamVjdCcgPyBvcHRpb24udHlwZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBiYjtcbiAgICB9O1xufTsiLCJleHBvcnQgZGVmYXVsdCAoZSx0eXBlLGZuLG1hcmspPT57XG4gICAgaWYoZS5hZGRFdmVudExpc3RlbmVyKXtcbiAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsZm4sZmFsc2UpO1xuICAgIH1lbHNlIGlmKGUuYXR0YWNoRXZlbnQpe1xuICAgICAgICAvL2UuZGV0YWNoRXZlbnQoJ29uJyt0eXBlLGZuKTtcbiAgICAgICAgZS5hdHRhY2hFdmVudCgnb24nK3R5cGUsKCk9PntcbiAgICAgICAgICAgIGZuLmNhbGwoZSx3aW5kb3cuZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9O1xufTsiLCJpbXBvcnQgJEJsb2IgZnJvbSAnLi9fQmxvYi5lczYnO1xuaW1wb3J0ICRhZGRFdmVudCBmcm9tICcuL19hZGRFdmVudC5lczYnO1xuXG5jb25zdCAkVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMIHx8IHdpbmRvdy5tb3pVUkwgfHwgd2luZG93Lm1zVVJMO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYXp5bG9hZCB7XG4gICAgY29uc3RydWN0b3Iob2JqKSB7XG4gICAgICAgIGNvbnN0IF90cyA9IHRoaXM7XG4gICAgICAgIGxldCBjb25maWcgPSBfdHMuY29uZmlnID0ge30sXG4gICAgICAgICAgICBkYXRhID0gX3RzLmRhdGEgPSB7fSxcbiAgICAgICAgICAgIG8gPSBfdHMub2JqID0ge1xuICAgICAgICAgICAgICAgIGRvYzogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgICAgICAgICAgIGJvZHk6IGRvY3VtZW50LmJvZHlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBibGFua0ltZyA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUUltV05nWUdCZ0FBQUFCUUFCaDZGTzFBQUFBQUJKUlU1RXJrSmdnZz09JztcblxuICAgICAgICBmb3IgKGxldCBpIGluIG9iaikge1xuICAgICAgICAgICAgX3RzLmNvbmZpZ1tpXSA9IG9ialtpXTtcbiAgICAgICAgfTtcblxuICAgICAgICAvL+m7mOiupOWuueW3ruWcqDEwMOWDj1xuICAgICAgICBfdHMuY29uZmlnWydyYW5nZSddID0gdHlwZW9mIF90cy5jb25maWdbJ3JhbmdlJ10gPT09ICdudW12ZXInID8gX3RzLmNvbmZpZ1sncmFuZ2UnXSA6IDEwMDtcblxuICAgICAgICAvL+WbvueJh+aWueazleaJqeWxlVxuICAgICAgICBfdHMuaW1hZ2VFeHRlbmQoKTtcblxuICAgICAgICAvL+WbvueJh+aVsOaNruWkhOeQhlxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY29uZmlnLm9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSBjb25maWcub2JqW2ldLFxuICAgICAgICAgICAgICAgIGRhdGFTcmMgPSBpdGVtLmxhenlfZGF0YVNyYyA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpLFxuICAgICAgICAgICAgICAgIGRhdGFDb3ZlciA9IGl0ZW0ubGF6eV9kYXRhQ292ZXIgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1jb3ZlcicpO1xuXG4gICAgICAgICAgICBpZiAoaXRlbS5zcmMgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zcmMgPSBibGFua0ltZztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcblxuICAgICAgICAgICAgLy/lsIbojrflj5bnmoTlr7nosaHlrZjlgqjotbfmnaVcbiAgICAgICAgICAgIGlmIChkYXRhW2RhdGFTcmNdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkYXRhW2RhdGFTcmNdID0gW107XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGF0YVtkYXRhU3JjXS5wdXNoKGl0ZW0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIGNvbnN0IF90cyA9IHRoaXMsXG4gICAgICAgICAgICBjb25maWcgPSBfdHMuY29uZmlnLFxuICAgICAgICAgICAgZGF0YSA9IF90cy5kYXRhLFxuICAgICAgICAgICAgbyA9IF90cy5vYmosXG4gICAgICAgICAgICB0YXNrLFxuICAgICAgICAgICAgdGVtcDtcblxuICAgICAgICAvL+WbvueJh+abtOaWsOaJp+ihjFxuICAgICAgICAodGFzayA9ICgpID0+IHtcbiAgICAgICAgICAgIC8v5b6X5Yiw5b2T5YmN5bGP5bmV5Yy65Z+f55qE6ZyA6KaB5pu05paw5Zu+54mH5YiX6KGoXG4gICAgICAgICAgICBsZXQgZUxpc3QgPSBfdHMuZ2V0U2hvd0xpc3QoKTtcblxuICAgICAgICAgICAgLy/pgY3ljobliqDovb3lm77niYdcbiAgICAgICAgICAgIGZvcihsZXQgaT0wLGxlbj1lTGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspe1xuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gZUxpc3RbaV0sXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGl0ZW0ubGF6eV9kYXRhU3JjO1xuICAgICAgICAgICAgICAgIF90cy5sb2FkSW1nKGl0ZW0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBsZXQgcnVuID0gKCk9PntcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0ZW1wKTtcbiAgICAgICAgICAgIHRlbXAgPSBzZXRUaW1lb3V0KHRhc2ssIDIwMCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJGFkZEV2ZW50KHdpbmRvdywnc2Nyb2xsJyxydW4pO1xuICAgICAgICAkYWRkRXZlbnQod2luZG93LCdyZXNpemUnLHJ1bik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5Zu+54mH5pa55rOV5omp5bGVXG4gICAgICogXG4gICAgICogQG1lbWJlcm9mIExhenlsb2FkXG4gICAgICovXG4gICAgaW1hZ2VFeHRlbmQoKSB7XG4gICAgICAgIGNvbnN0IF90cyA9IHRoaXM7XG5cbiAgICAgICAgSW1hZ2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAodXJsLCBvTCkge1xuICAgICAgICAgICAgbGV0IHVwZGF0ZUltZyA9IChzcmMpID0+IHtcbiAgICAgICAgICAgICAgICAvL+abtOaWsOWbvueJh1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBvTC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IG9MW2ldO1xuICAgICAgICAgICAgICAgICAgICBfdHMudXBkYXRlSW1nKGl0ZW0sIHNyYyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGVUaXBzID0gKG8pID0+IHtcbiAgICAgICAgICAgICAgICAvL+abtOaWsOaPkOekulxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBvTC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IG9MW2ldO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbXBsZXRlZFBlcmNlbnRhZ2UgPSBvO1xuICAgICAgICAgICAgICAgICAgICBvLm8gPSBpdGVtO1xuICAgICAgICAgICAgICAgICAgICBfdHMudGlwcyhvKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKCRCbG9iICYmICRVUkwgJiYgWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW1nID0gdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gaGVhZGVycy5tYXRjaCgvXkNvbnRlbnQtVHlwZVxcOlxccyooLio/KSQvbWkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGUgPSBtWzFdIHx8ICdpbWFnZS9wbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvYiA9ICRCbG9iKFt0aGlzLnJlc3BvbnNlXSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG1pbWVUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9ICRVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbWcoc3JjKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgeGhyLm9ubG9hZHN0YXJ0ID0geGhyLm9ucHJvZ3Jlc3MgPSB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQ6IGUubG9hZGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw6IGUudG90YWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlOiBlLmxvYWRlZCA9PT0gMCA/IDAgOiBlLmxvYWRlZCAvIGUudG90YWxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGlwcyhvKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnbG9hZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRlbXA7XG5cbiAgICAgICAgICAgICAgICB0ZW1wID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoby5zY2hlZHVsZSA+IDAuOTgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIG8uc2NoZWR1bGUgPSBvLnNjaGVkdWxlICsgMC4wMTtcbiAgICAgICAgICAgICAgICAgICAgby5zdGF0dXMgPSAncHJvZ3Jlc3MnO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaXBzKG8pO1xuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGVtcCk7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUltZyh0aGlzLnNyYyk7XG4gICAgICAgICAgICAgICAgICAgIG8uc3RhdHVzID0gJ2xvYWRlZCc7XG4gICAgICAgICAgICAgICAgICAgIG8uc2NoZWR1bGUgPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpcHMobyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W5rWP6KeI5Zmo56qX5Y+j5aSn5bCPXG4gICAgICogXG4gICAgICogQHJldHVybnMge29iamVjdH0g5a655Zmo5a696auYXG4gICAgICogQG1lbWJlcm9mIExhenlsb2FkXG4gICAgICovXG4gICAgZ2V0V2luU2l6ZSgpIHtcbiAgICAgICAgY29uc3QgX3RzID0gdGhpcyxcbiAgICAgICAgICAgIG8gPSBfdHMub2JqO1xuICAgICAgICBsZXQgbyA9IHtcbiAgICAgICAgICAgIHc6IHdpbmRvdy5pbm5lcldpZHRoIHx8IG8uZG9jLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgaDogd2luZG93LmlubmVySGVpZ2h0IHx8IG8uZG9jLmNsaWVudEhlaWdodFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bpobXpnaLmu5rliqjnmoTlg4/ntKBcbiAgICAgKi9cbiAgICBnZXRXaW5TY3JvbGwoKSB7XG4gICAgICAgIGNvbnN0IF90cyA9IHRoaXMsXG4gICAgICAgICAgICBvID0gX3RzLm9iajtcbiAgICAgICAgbGV0IGQgPSB7XG4gICAgICAgICAgICAvLyB4OiB3aW5kb3cuc2Nyb2xsWCB8fCBkb2N1bWVudC5jb21wYXRNb2RlID09IFwiQmFja0NvbXBhdFwiID8gZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsXG4gICAgICAgICAgICAvLyB5OiB3aW5kb3cuc2Nyb2xsWSB8fCBkb2N1bWVudC5jb21wYXRNb2RlID09IFwiQmFja0NvbXBhdFwiID8gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXG4gICAgICAgICAgICB4OiBkb2N1bWVudC5jb21wYXRNb2RlID09IFwiQmFja0NvbXBhdFwiID8gZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsXG4gICAgICAgICAgICB5OiBkb2N1bWVudC5jb21wYXRNb2RlID09IFwiQmFja0NvbXBhdFwiID8gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgfVxuXG4gICAgbG9hZEltZyhvKSB7XG4gICAgICAgIGNvbnN0IF90cyA9IHRoaXMsXG4gICAgICAgICAgICBkYXRhID0gX3RzLmRhdGE7XG5cbiAgICAgICAgLy/lt7Lnu4/liqDovb3ov4fnmoTliJnkuI3lpITnkIZcbiAgICAgICAgaWYgKG8ubGF6eV9pc0luaXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIGxldCBsaXN0ID0gZGF0YVtvLmxhenlfZGF0YVNyY107XG5cbiAgICAgICAgLy8gaWYoby50YWdOYW1lID09PSAnSU1HJyl7XG4gICAgICAgIC8vICAgICBvLmxvYWQoby5sYXp5X2RhdGFTcmMsbGlzdCk7XG4gICAgICAgIC8vIH1lbHNle1xuICAgICAgICBsZXQgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5sb2FkKG8ubGF6eV9kYXRhU3JjLCBsaXN0KTtcbiAgICAgICAgaW1nLnNyYyA9IG8ubGF6eV9kYXRhU3JjO1xuXG4gICAgICAgIC8vIGlmKCRCbG9iKXtcbiAgICAgICAgLy8gaW1nLmxvYWQoby5sYXp5X2RhdGFTcmMsIGxpc3QpO1xuICAgICAgICAvLyB9ZWxzZXtcbiAgICAgICAgLy8gICAgIC8v5qih5ouf5Yqg6L29XG4gICAgICAgIC8vICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gICAgICAgICBmb3IobGV0IGk9MCxsZW49bGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspe1xuICAgICAgICAvLyAgICAgICAgICAgICBsZXQgaXRlbSA9IGxpc3RbaV07XG4gICAgICAgIC8vICAgICAgICAgICAgIF90cy51cGRhdGVJbWcoaXRlbSxzcmMpO1xuICAgICAgICAvLyAgICAgICAgIH07XG4gICAgICAgIC8vICAgICB9O1xuICAgICAgICAvLyB9O1xuXG4gICAgICAgIC8vIH07XG5cblxuICAgICAgICAvL+abtOaWsOWbvueJh+WcsOWdgOebuOWQjOeahOWFg+e0oFxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSBsaXN0W2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0ubGF6eV9pc0luaXQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpdGVtLmxhenlfaXNJbml0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmKGl0ZW0ubGF6eV9kYXRhQ292ZXIpe1xuICAgICAgICAgICAgICAgIF90cy51cGRhdGVJbWcoaXRlbSwgaXRlbS5sYXp5X2RhdGFDb3Zlcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOabtOaWsOWbvueJh1xuICAgICAqIFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvIOmcgOimgeabtOaWsOeahOWFg+e0oFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwg5Zu+54mH5Zyw5Z2AXG4gICAgICogQG1lbWJlcm9mIExhenlsb2FkXG4gICAgICovXG4gICAgdXBkYXRlSW1nKG8sIHVybCkge1xuICAgICAgICBpZiAoby50YWdOYW1lID09PSAnSU1HJykge1xuICAgICAgICAgICAgby5zcmMgPSB1cmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt1cmx9KWA7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0RWxlbWVudFRvcChlbGVtZW50KSB7XG4gICAgICAgIGxldCBhY3R1YWxUb3AgPSBlbGVtZW50Lm9mZnNldFRvcCxcbiAgICAgICAgICAgIGN1cnJlbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcblxuICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gbnVsbCkge+OAgOOAgOOAgOOAgOOAgOOAgFxuICAgICAgICAgICAgYWN0dWFsVG9wICs9IGN1cnJlbnQub2Zmc2V0VG9wO+OAgOOAgOOAgOOAgOOAgOOAgFxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQub2Zmc2V0UGFyZW50O+OAgOOAgOOAgOOAgFxuICAgICAgICB9O+OAgOOAgOOAgFxuICAgICAgICByZXR1cm4gYWN0dWFsVG9wO1xuICAgIH1cblxuICAgIGdldEVsZW1lbnRMZWZ0KGVsZW1lbnQpIHtcbiAgICAgICAgbGV0IGFjdHVhbExlZnQgPSBlbGVtZW50Lm9mZnNldExlZnQsXG4gICAgICAgICAgICBjdXJyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG7jgIDjgIDjgIBcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IG51bGwpIHvjgIDjgIDjgIDjgIDjgIDjgIBcbiAgICAgICAgICAgIGFjdHVhbExlZnQgKz0gY3VycmVudC5vZmZzZXRMZWZ0O+OAgOOAgOOAgOOAgOOAgOOAgFxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQub2Zmc2V0UGFyZW50O+OAgOOAgOOAgOOAgFxuICAgICAgICB9O1xuICAgICAgICDjgIDjgIDjgIDjgIBcbiAgICAgICAgcmV0dXJuIGFjdHVhbExlZnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W6ZyA6KaB5pi+56S655qE5YWD57SgXG4gICAgICovXG4gICAgZ2V0U2hvd0xpc3QoKSB7XG4gICAgICAgIGNvbnN0IF90cyA9IHRoaXMsXG4gICAgICAgICAgICBjb25maWcgPSBfdHMuY29uZmlnLFxuICAgICAgICAgICAgZGF0YSA9IF90cy5kYXRhO1xuXG4gICAgICAgIGxldCBzY3JvbGwgPSBfdHMuZ2V0V2luU2Nyb2xsKCksXG4gICAgICAgICAgICB3aW5TaXplID0gX3RzLmdldFdpblNpemUoKSxcbiAgICAgICAgICAgIHRlbXAgPSBbXTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhzY3JvbGwsd2luU2l6ZSlcblxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY29uZmlnLm9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSBjb25maWcub2JqW2ldLFxuICAgICAgICAgICAgICAgIGxlZnQgPSBfdHMuZ2V0RWxlbWVudExlZnQoaXRlbSksXG4gICAgICAgICAgICAgICAgdG9wID0gX3RzLmdldEVsZW1lbnRUb3AoaXRlbSksXG4gICAgICAgICAgICAgICAgd2lkdGggPSBpdGVtLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCA9IGl0ZW0uY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgICAgIHhsID0gbGVmdCArIHdpZHRoIC0gc2Nyb2xsLnggPiAwIC0gY29uZmlnLnJhbmdlLCAvL+mhtemdouW3puS+p+aYvuekuuadoeS7tlxuICAgICAgICAgICAgICAgIHhyID0gd2luU2l6ZS53ICsgc2Nyb2xsLnggKyBjb25maWcucmFuZ2UgPiBsZWZ0LCAvL+mhtemdouWPs+S+p+aYvuekuuadoeS7tlxuICAgICAgICAgICAgICAgIHl0ID0gdG9wICsgaGVpZ2h0IC0gc2Nyb2xsLnkgPiAwIC0gY29uZmlnLnJhbmdlLCAvL+mhtemdoumhtumDqOaYvuekuuadoeS7tlxuICAgICAgICAgICAgICAgIHliID0gdG9wIDwgc2Nyb2xsLnkgKyB3aW5TaXplLmggKyBjb25maWcucmFuZ2UsIC8v6aG16Z2i5bqV6YOo5pi+56S65p2h5Lu2XG4gICAgICAgICAgICAgICAgaXNJbml0ID0gaXRlbS5sYXp5X2lzSW5pdDtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2xlZnQnLGxlZnQsJ3RvcCcsdG9wLCd3aWR0aCcsd2lkdGgsJ2hlaWdodCcsaGVpZ2h0KTtcblxuICAgICAgICAgICAgaWYgKHhsICYmIHhyICYmIHl0ICYmIHliICYmICFpc0luaXQpIHtcbiAgICAgICAgICAgICAgICB0ZW1wLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDpu5jorqTnmoTmj5DnpLrmlrnms5VcbiAgICAgKiBAcGFyYW0gb2JqIC0tXG4gICAgICovXG4gICAgdGlwcyhvYmopIHtcbiAgICAgICAgbGV0IHNjaGVkdWxlID0gcGFyc2VJbnQob2JqLnNjaGVkdWxlICogMTAwKSArICclJyxcbiAgICAgICAgICAgIG8gPSBvYmoubztcblxuICAgICAgICBpZiAoby5sYXp5X2lzRWNob1RpcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvLmxhenlfaXNFY2hvVGlwID0gdHJ1ZTtcbiAgICAgICAgICAgIG8ubGF6eV9vVGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgby5sYXp5X29UaXAuY2xhc3NOYW1lID0gJ2xhenlfdGlwJztcbiAgICAgICAgICAgIG8ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoby5sYXp5X29UaXAsIG8ubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhvLmxhenlfb3RpcC5wYXJlbnROb2RlKVxuICAgICAgICB9O1xuXG4gICAgICAgIG8ubGF6eV9vVGlwLmlubmVySFRNTCA9IHNjaGVkdWxlO1xuXG4gICAgICAgIC8v5b2T5Yqg6L296L+b5bqm5Li6MeaXtu+8jOWImeenu+mZpOWvueW6lOeahOWKoOi9veaPkOekulxuICAgICAgICBpZihvYmouc2NoZWR1bGUgPT09IDEgJiYgby5sYXp5X2lzRWNob1RpcCl7XG4gICAgICAgICAgICBvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoby5sYXp5X29UaXApO1xuICAgICAgICAgICAgby5sYXp5X2lzRWNob1RpcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICB9XG59OyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxZQUFlLFVBQUMsS0FBSyxFQUFDLE1BQU07SUFDeEIsSUFBRyxNQUFNLENBQUMsSUFBSSxFQUFDO1FBQ1gsT0FBTyxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUMsTUFBTSxDQUFDLENBQUE7S0FDaEM7U0FBSTtRQUNELE1BQU0sQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsSUFBSSxNQUFN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